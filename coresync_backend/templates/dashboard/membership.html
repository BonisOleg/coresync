{% extends 'dashboard/base_dashboard.html' %}
{% load static %}

{% block dashboard_content %}
<section class="privacy-section pt-0">
    <div class="container">
        <h2 class="privacy-title">My Membership</h2>
    </div>
</section>

<section class="privacy-section">
    <div class="container">
        <div class="dashboard-content-wide">
            <div class="membership-card membership-card--featured">
                <h3 class="membership-card-title mb-2" id="membership-plan-name">
                    Loading...
                </h3>

                <div class="membership-price">
                    <span id="membership-status" style="font-size: 1rem; color: #10B981;">Active</span>
                </div>

                <div class="mt-2 mb-2">
                    <div class="info-row">
                        <span class="info-label">Member Since:</span>
                        <span class="info-value" id="member-since">Loading...</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Renewal Date:</span>
                        <span class="info-value" id="renewal-date">Loading...</span>
                    </div>
                </div>

                <button class="membership-cta-btn btn-primary-beige mt-2" onclick="window.location.href='/membership/'">
                    View All Plans
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Usage Analytics -->
<section class="privacy-section">
    <div class="container">
        <h3 class="privacy-title">Your Usage This Month</h3>
        <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin-top: 2rem;">
            <div style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 8px; text-align: center;">
                <div style="font-size: 3rem; color: #B8860B; font-weight: bold;" id="services-used">0</div>
                <div style="color: rgba(255,255,255,0.7); margin-top: 0.5rem;">Services Used</div>
            </div>
            <div style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 8px; text-align: center;">
                <div style="font-size: 3rem; color: #10B981; font-weight: bold;" id="total-savings">$0</div>
                <div style="color: rgba(255,255,255,0.7); margin-top: 0.5rem;">Total Savings</div>
            </div>
            <div style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 8px; text-align: center;">
                <div style="font-size: 3rem; color: #3B82F6; font-weight: bold;" id="visit-count">0</div>
                <div style="color: rgba(255,255,255,0.7); margin-top: 0.5rem;">Spa Visits</div>
            </div>
        </div>
    </div>
</section>

<!-- Benefits List -->
<section class="privacy-section">
    <div class="container">
        <h3 class="privacy-title">Your Active Benefits</h3>
        <div id="benefits-list" style="margin-top: 2rem;">
            <!-- Loaded via JavaScript -->
        </div>
    </div>
</section>

<!-- Upgrade Option -->
<section class="privacy-section">
    <div class="container">
        <div
            style="padding: 3rem; background: linear-gradient(135deg, rgba(184,134,11,0.1), rgba(184,134,11,0.05)); border-radius: 12px;">
            <div style="text-align: center;">
                <h3 class="privacy-title">Unlock More Benefits</h3>
                <p style="margin: 1rem 0; color: rgba(255,255,255,0.8);">Upgrade to enjoy additional perks and services
                </p>
                <div id="upgrade-options" style="margin-top: 2rem;">
                    <!-- Loaded via JavaScript -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Toast Container -->
<div id="toast-container" style="position: fixed; top: 20px; right: 20px; z-index: 9999;"></div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/membership-detail.js' %}"></script>
<script>
    // Initialize membership detail
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof MembershipDetail !== 'undefined') {
            window.membershipDetail = new MembershipDetail();
        }
    });
</script>
{% endblock %}