{% extends 'base.html' %}
{% load static %}

{% block title %}CORESYNC - Membership Plans{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/membership.css' %}">
{% endblock %}

{% block content %}
<!-- Membership Hero Section with custom sizing -->
<section class="membership-hero">
    <img src="{% static 'images/Hiro_converted.png' %}" alt="Membership Benefits" class="private-hero-image">
    <div class="membership-hero-overlay">
        <h1 class="membership-hero-title">MEMBERSHIP</h1>
        <p class="membership-hero-subtitle">Unlock Premium Wellness Experiences</p>
    </div>
</section>

<!-- Membership Plans Section -->
<section class="membership-section">
    <div class="container">
        <h2 class="membership-title">MEMBERSHIP PLANS</h2>

        <!-- Membership Cards Grid -->
        <div class="membership-cards-grid">
            <!-- Base Tier -->
            <div class="membership-card">
                <h3 class="membership-card-title">BASE TIER</h3>
                <div class="membership-price">$375<span>/month</span></div>
                <div class="membership-discount">25% OFF</div>
                <ul class="membership-benefits">
                    <li>25% discount on all services</li>
                    <li>Priority booking access</li>
                    <li>AI Massage Bed with discount</li>
                    <li>Backyard access ($150-200/hour)</li>
                    <li>Coresync Private at full price</li>
                    <li>Email support</li>
                </ul>
                <button class="membership-cta-btn" data-action="open-membership" data-plan="base">JOIN BASE
                    TIER</button>
            </div>

            <!-- Premium Tier -->
            <div class="membership-card membership-card--featured">
                <h3 class="membership-card-title">PREMIUM TIER</h3>
                <div class="membership-price">$700<span>/month</span></div>
                <div class="membership-discount">35% OFF</div>
                <ul class="membership-benefits">
                    <li>1-2 free services per month</li>
                    <li>1 free AI Massage Bed session</li>
                    <li>Discount on Coresync Private</li>
                    <li>Discounted Backyard access</li>
                    <li>Priority customer support</li>
                    <li>Birthday month perks</li>
                    <li>Guest pass included</li>
                </ul>
                <button class="membership-cta-btn" data-action="open-membership" data-plan="premium">JOIN PREMIUM
                    TIER</button>
            </div>

            <!-- Unlimited Tier -->
            <div class="membership-card">
                <h3 class="membership-card-title">UNLIMITED TIER</h3>
                <div class="membership-price">$1,650<span>/month</span></div>
                <div class="membership-discount">ALL ACCESS</div>
                <ul class="membership-benefits">
                    <li>Unlimited access to all services</li>
                    <li>Unlimited AI Massage Bed sessions</li>
                    <li>Unlimited Coresync Private access</li>
                    <li>Unlimited Backyard access</li>
                    <li>Curated products included</li>
                    <li>Concierge service included</li>
                    <li>VIP customer support</li>
                    <li>Exclusive events access</li>
                </ul>
                <button class="membership-cta-btn" data-action="open-membership" data-plan="unlimited">JOIN UNLIMITED
                    TIER</button>
            </div>
        </div>
    </div>
</section>

<!-- Booking Rules Section -->
<section class="membership-section">
    <div class="container">
        <h2 class="membership-title">BOOKING PRIVILEGES</h2>
        <div class="booking-privileges">
            <p class="privileges-description">
                Members enjoy exclusive booking privileges that ensure you never miss your wellness moment.
                Priority access means peace of mind.
            </p>
            <div class="membership-cards-grid privileges-grid">
                <div class="membership-card privilege-card">
                    <h4 class="membership-card-title privilege-title">Members</h4>
                    <p class="privilege-value">2-3 Months Advance</p>
                </div>
                <div class="membership-card privilege-card">
                    <h4 class="membership-card-title privilege-title">Non-Members</h4>
                    <p class="privilege-value--muted">3 Days Only</p>
                </div>
                <div class="membership-card privilege-card">
                    <h4 class="membership-card-title privilege-title">Payment</h4>
                    <p class="privilege-value--muted">Card Required</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Comparison Table Section -->
<section class="membership-section">
    <div class="container">
        <div class="membership-comparison">
            <h2 class="membership-title">PLAN COMPARISON</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Non-Member</th>
                        <th>Base Tier</th>
                        <th>Premium Tier</th>
                        <th>Unlimited</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="comparison-feature">Booking Window</td>
                        <td>3 days</td>
                        <td>2-3 months</td>
                        <td>2-3 months</td>
                        <td>2-3 months</td>
                    </tr>
                    <tr>
                        <td class="comparison-feature">Service Discount</td>
                        <td>0%</td>
                        <td>25%</td>
                        <td>35%</td>
                        <td>100%</td>
                    </tr>
                    <tr>
                        <td class="comparison-feature">AI Massage Bed</td>
                        <td>Full Price</td>
                        <td>Discounted</td>
                        <td>1 Free/Month</td>
                        <td>Unlimited</td>
                    </tr>
                    <tr>
                        <td class="comparison-feature">Coresync Private</td>
                        <td>Full Price</td>
                        <td>Full Price</td>
                        <td>Discounted</td>
                        <td>Unlimited</td>
                    </tr>
                    <tr>
                        <td class="comparison-feature">Backyard Access</td>
                        <td>Not Available</td>
                        <td>$150-200/hr</td>
                        <td>Discounted</td>
                        <td>Unlimited</td>
                    </tr>
                    <tr>
                        <td class="comparison-feature">Guest Passes</td>
                        <td>—</td>
                        <td>—</td>
                        <td class="comparison-check">Yes</td>
                        <td class="comparison-check">Yes</td>
                    </tr>
                    <tr>
                        <td class="comparison-feature">Concierge Service</td>
                        <td>—</td>
                        <td>—</td>
                        <td>—</td>
                        <td class="comparison-check">Yes</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>

<!-- Removed duplicate booking calendar - use dedicated /book/ page -->

<!-- Benefits Section -->
<section class="membership-section">
    <div class="container">
        <h2 class="membership-title">MEMBER BENEFITS</h2>
        <div class="amenities-carousel">
            <div class="amenities-container">
                <div class="amenities-track">
                    <div class="amenity-item">
                        <video autoplay muted loop playsinline class="amenity-video">
                            <source src="{% static 'videos/priority_access.mp4' %}" type="video/mp4">
                            <img src="{% static 'images/fireplace.png' %}" alt="Priority Access" class="amenity-image">
                        </video>
                    </div>
                    <div class="amenity-item">
                        <video autoplay muted loop playsinline class="amenity-video">
                            <source src="{% static 'videos/exclusive_discounts.mp4' %}" type="video/mp4">
                            <img src="{% static 'images/relaxation_room.png' %}" alt="Exclusive Discounts"
                                class="amenity-image">
                        </video>
                    </div>
                    <div class="amenity-item">
                        <video autoplay muted loop playsinline class="amenity-video">
                            <source src="{% static 'videos/vip_treatment.mp4' %}" type="video/mp4">
                            <img src="{% static 'images/shower.png' %}" alt="VIP Treatment" class="amenity-image">
                        </video>
                    </div>
                    <div class="amenity-item">
                        <video autoplay muted loop playsinline class="amenity-video">
                            <source src="{% static 'videos/member_events.mp4' %}" type="video/mp4">
                            <img src="{% static 'images/treatment_room.png' %}" alt="Member Events"
                                class="amenity-image">
                        </video>
                    </div>
                    <div class="amenity-item">
                        <video autoplay muted loop playsinline class="amenity-video">
                            <source src="{% static 'videos/concierge_service.mp4' %}" type="video/mp4">
                            <img src="{% static 'images/sauna.png' %}" alt="Concierge Service" class="amenity-image">
                        </video>
                    </div>
                </div>
            </div>
            <button class="carousel-nav carousel-prev" data-carousel-nav="-1">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
            <button class="carousel-nav carousel-next" data-carousel-nav="1">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
        </div>
    </div>
</section>

<!-- AI Assistant Widget (Requirements: AI + WhatsApp backup) -->
<div id="ai-assistant-widget" class="ai-widget">
    <div class="ai-widget-header">
        <div class="ai-widget-title">
            <span>CoreSync AI Assistant</span>
        </div>
        <button class="ai-widget-close" data-action="toggle-ai">&times;</button>
    </div>
    <div class="ai-widget-content">
        <div class="ai-messages" id="ai-messages">
            <div class="ai-message ai-message--bot">
                <div class="ai-message-content">
                    Hello! I'm your CoreSync AI Assistant. I can help you with:
                    <br>• Membership plans and pricing
                    <br>• Service information and booking
                    <br>• Spa amenities and technology
                    <br><br>What would you like to know?
                </div>
            </div>
        </div>
        <div class="ai-input-area">
            <input type="text" id="ai-input" class="ai-input" placeholder="Ask me about CoreSync services...">
            <button class="ai-send-btn" data-action="send-ai">Send</button>
        </div>
        <div class="ai-fallback d-none" id="ai-fallback">
            <div class="ai-fallback-message">
                I couldn't help with that. Would you like to speak with our team?
            </div>
            <button class="whatsapp-btn" data-action="open-whatsapp">
                Chat on WhatsApp
            </button>
        </div>
    </div>
</div>

<!-- AI Widget Toggle Button -->
<div class="ai-widget-toggle" data-action="toggle-ai">
    <span class="ai-toggle-text">Need Help?</span>
</div>

<!-- Membership Form Modal (hidden by default) -->
<div id="membership-modal" class="modal">
    <div class="modal-content">
        <span class="modal-close" data-action="close-modal">&times;</span>
        <h2 class="privacy-title" id="modal-title">JOIN MEMBERSHIP</h2>
        <form id="membership-form" class="membership-form">
            <input type="hidden" id="selected-plan" name="plan" value="">

            <div class="form-group">
                <label for="first-name">First Name</label>
                <input type="text" id="first-name" name="first_name" required>
            </div>

            <div class="form-group">
                <label for="last-name">Last Name</label>
                <input type="text" id="last-name" name="last_name" required>
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="tel" id="phone" name="phone" required>
            </div>

            <button type="submit" class="membership-cta-btn">START MEMBERSHIP</button>
        </form>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/carousel-shared.js' %}"></script>
<script src="{% static 'js/membership-page.js' %}"></script>
{% endblock %}